"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[349],{3488:function(e,n,t){t.d(n,{D:function(){return o}});t(3158);var r=t(6373),a=t(9198),c=t(184),i=function(){return(0,c.jsx)(a.x,{display:"flex",justifyContent:"center",children:(0,c.jsx)(r.W0,{hcolor:function(e){return e.theme.colors.loader},height:80,width:80,ariaLabel:"loading"})})},o=function(e){var n=e.status,t=e.error;return(0,c.jsxs)(c.Fragment,{children:["pending"===n&&(0,c.jsx)(i,{}),"rejected"===n&&(0,c.jsx)(a.x,{color:"red",textAlign:"center",children:t.message})]})}},6004:function(e,n,t){t.d(n,{q:function(){return r}});var r={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}},3726:function(e,n,t){t.d(n,{j:function(){return i}});var r=t(885),a=t(6004),c=t(2791),i=function(){var e=(0,c.useState)(a.q.IDLE),n=(0,r.Z)(e,2),t=n[0],i=n[1],o=(0,c.useState)({message:""}),u=(0,r.Z)(o,2);return{status:t,setStatus:i,error:u[0],setError:u[1]}}},201:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var r=t(5861),a=t(885),c=t(7757),i=t.n(c),o=t(2791),u=t(1615),s=t(3504),l=t(6871),f=t(3488),d=t(6004),h=t(3726),v=t(184),p=function(e){var n=e.movies,t=e.location;return(0,v.jsx)("ul",{children:n.results.map((function(e){var n=e.id,r=e.original_title;return(0,v.jsx)("li",{children:(0,v.jsx)(s.rU,{to:"/movies/".concat(n),state:{from:t},children:r})},n)}))})},x=t(5705),m=t(5650),g=function(e){var n=e.name;return(0,v.jsx)(x.Bc,{name:n,render:function(e){return(0,v.jsx)("p",{children:e})}})},j=m.Ry().shape({query:m.Z_().min(1).max(13).required()}),y={query:""},b=function(e){var n=e.onSubmit;return(0,v.jsx)(x.J9,{initialValues:y,validationSchema:j,onSubmit:function(e,t){t.resetForm;n(e)},children:(0,v.jsxs)(x.l0,{autoComplete:"off",children:[(0,v.jsxs)("label",{children:[(0,v.jsx)(x.gN,{type:"text",name:"query",title:"Query may contain only letters, apostrophe, dash and spaces"}),(0,v.jsx)(g,{name:"query"})]}),(0,v.jsx)("button",{type:"submit",children:"Search"})]})})},E=function(){var e=(0,o.useState)(null),n=(0,a.Z)(e,2),t=n[0],c=n[1],x=(0,s.lr)(),m=(0,a.Z)(x,2),g=m[0],j=m[1],y=g.get("query"),E=(0,l.TH)(),S=(0,h.j)(),_=S.status,k=S.setStatus,q=S.error,w=S.setError;(0,o.useEffect)((function(){function e(){return(e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(d.q.PENDING),e.next=4,u.z1(y);case 4:n=e.sent,c(n),k(d.q.RESOLVED),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),w(e.t0),k(d.q.REJECTED);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}""!==y&&null!==y&&function(){e.apply(this,arguments)}()}),[y,w,k]);return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:"Movies"}),(0,v.jsx)(b,{onSubmit:function(e){var n=e.query;j({query:n})}}),(0,v.jsx)(f.D,{status:_,error:q}),t&&(0,v.jsx)(p,{movies:t,location:E})]})}},1615:function(e,n,t){t.d(n,{zv:function(){return h},TP:function(){return d},tx:function(){return v},Hg:function(){return l},z1:function(){return f}});var r=t(5861),a=t(7757),c=t.n(a),i="https://api.themoviedb.org/3",o="c24a579521956747b362db1dbfab545a";function u(){return s.apply(this,arguments)}function s(){return s=(0,r.Z)(c().mark((function e(){var n,t,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,fetch(n,t);case 4:if(!(r=e.sent).ok){e.next=11;break}return e.next=8,r.json();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=Promise.reject(new Error("Not Found"));case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(){return u("".concat(i,"/trending/movie/day?api_key=").concat(o))}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cat",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u("".concat(i,"/search/movie?api_key=").concat(o,"&language=en-US&region=US&include_adult=false&query=").concat(e,"&page=").concat(n))}function d(e){return u("".concat(i,"/movie/").concat(e,"?api_key=").concat(o,"&language=en-US"))}function h(e){return u("".concat(i,"/movie/").concat(e,"/credits?api_key=").concat(o,"&language=en-US"))}function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u("".concat(i,"/movie/").concat(e,"/reviews?api_key=").concat(o,"&language=en-US&page=").concat(n))}}}]);
//# sourceMappingURL=349.76dbfa63.chunk.js.map